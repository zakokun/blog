<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-cn" lang="zh-cn">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.69.2" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHPCON2016 的一些心得 &middot; 杂鱼君的博客</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="/css/poole.css">
  <link type="text/css" rel="stylesheet" href="/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class="theme-base-0b ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="/"><h1>杂鱼君的博客</h1></a>
      <p class="lead">
       好吃懒做,眼高手低 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="/">Home</a> </li>
        <li><a href="/tags/"> Tags </a></li><li><a href="/about/about"> About </a></li>
      </ul>
    </nav>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>PHPCON2016 的一些心得</h1>
  <time datetime=2016-06-30T00:00:00Z class="post-date">Thu, Jun 30, 2016</time>
  <h2 id="php-在金融股票项目中的运用-超群">php 在金融股票项目中的运用 (@超群)</h2>
<h3 id="ppt概要">PPT概要</h3>
<ul>
<li>变量类型如何做限制以防被转换</li>
<li>浮点数的精度问题</li>
<li>数据准确性如何校验</li>
<li>如何应对短时间大量的请求</li>
<li>客户端多个请求合并(kql)</li>
</ul>
<h3 id="听后感">听后感</h3>
<p>因为我上一家公司就是金融资讯类公司,同时也在开发配资和基金项目,当时由于经验不足等原因,开发过程中碰到了很多坑.所以对这个演讲格外感兴趣.</p>
<p>一般来说php是不太适合开发金融系统的,一个很大的原因就是php是弱类型+动态类型的语言(具体强/弱,动态/静态的区别可以google一下,大致就是强/弱类型区别在于是否允许隐式转换,动态/静态区别在于是否要明确定义变量类型),这很容易由于开发人员疏忽导致数值误差
比如:</p>
<pre><code>    0 == null
    0 == false
    '' == 0
</code></pre><p>这对一个金融系统是很要命的事情,更何况数据库是严格区分<code>0</code>,<code>null</code>,<code>false</code>的,问题就更多了.</p>
<h2 id="php系统问题排查实践-信海龙">PHP系统问题排查实践 (@信海龙)</h2>
<h3 id="ppt概要-1">PPT概要</h3>
<ul>
<li>php线上环境中一些常见的问题形式</li>
<li>解决问题的基本思路</li>
<li>一些调试的工具</li>
<li>几个经典的案例分析 (具体过程演讲者的博客有详细描述,链接在下面)
<ul>
<li>crontab脚本执行并发冲突的问题 <a href="http://www.bo56.com/crond%E4%B8%AD%E4%BD%BF%E7%94%A8flock%E5%91%BD%E4%BB%A4%E7%9A%84%E5%9D%91/">链接</a></li>
<li>gearman导致cpu100问题 <a href="http://www.bo56.com/php%E8%BF%9B%E7%A8%8B%E5%AF%BC%E8%87%B4%E6%9C%8D%E5%8A%A1%E5%99%A8cpu-100%E9%97%AE%E9%A2%98%E8%BF%BD%E6%9F%A5%E8%BF%87%E7%A8%8B/">链接</a></li>
<li>找出有问题的负载服务器 <a href="http://www.bo56.com/tcpdump-%E5%92%8C-wireshark%E7%BB%84%E5%90%88%E6%8B%B3%EF%BC%8C%E6%8F%AA%E5%87%BA%E6%9C%89%E9%97%AE%E9%A2%98%E7%9A%84%E6%9C%BA%E5%99%A8/">链接</a></li>
<li>程序后端执行的一个坑 <a href="http://www.bo56.com/%E5%9C%A82016%E7%9A%84phpcon%E5%A4%A7%E4%BC%9A%E4%B8%8A%E7%9A%84%E5%88%86%E4%BA%ABppt%E4%B8%8B%E8%BD%BD/">链接</a></li>
</ul>
</li>
</ul>
<h3 id="听后感-1">听后感</h3>
<p>因为我自己对服务器的维护也很感兴趣,之前工作中也负责线上服务器的异常处理,所以这场对我也非常有吸引力.</p>
<p>之前的工作经历中,基本90%的问题都能通过</p>
<p><strong>http code - &gt; nginx 的 error.log &amp; access.log -&gt; php的error.log &amp; slow.log -&gt;
mysql 的 slow-log</strong></p>
<p>这一套流程解决,然而剩下的10%就不是那么容易了,演讲者分享的几个案例自己也碰到过.</p>
<p>有一次是一个每隔2分钟执行一次的crotnab脚本出现问题,计算出来的结果出错.排除代码逻辑问题以后,认定是脚本执行冲突的问题,正常情况下脚本的执行时间只有几十秒左右,然而在服务器负载比较高的情况下,这个时间被大大延长,导致了上一次脚本还没结束,新的脚本又开始执行了.解决办法就如同<a href="http://www.bo56.com/%E8%A7%A3%E5%86%B3crond%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E5%B9%B6%E5%8F%91%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/">这里</a>
说的,添加文件锁.</p>
<p>还有一次是发现某几台服务器无法响应请求,各种检查以后发现 logrotate
进程卡死不再处理日志了,再加上监控漏掉了针对硬盘空间的监控,导致nginx日志塞满了服务器, 于是php-fpm无法启动了……</p>
<h2 id="php7swoole开发超高性能后台程序-韩天峰">PHP7+Swoole开发超高性能后台程序 (@韩天峰)</h2>
<h3 id="听后感-2">听后感</h3>
<p><del>韩老师的日常吹Swoole,傍上php7以后吹的更欢了</del></p>
<p>因为我并没用过swoole,因此仅仅听个热闹,并没有什么特别的感觉.不过韩老师最后透露Swoole2.0很快就要发布了,底层实现了协程,不再需要yield关键字了.
<del>并没有什么卵用,因为底层还是没摆脱yield</del></p>
<h2 id="起点中文网全新改版的协程之路-张凌">起点中文网全新改版的协程之路 (@张凌)</h2>
<h3 id="ppt概要-2">PPT概要</h3>
<ul>
<li>公开资源和vip资源cdn鉴权的处理</li>
<li>灰度测试模型
<ul>
<li>客户端模型</li>
<li>后台模型</li>
<li>Web模型
<ul>
<li>Web模型的灰度策略</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="听后感-3">听后感</h3>
<p><del>Swoole神教徒之一</del></p>
<p>比较吸引我的是他们针对cdn资源鉴权处理的相关优化,起点中文网之前只有公众的小说章节在CDN上,VIP章节需要从自己的服务器上全文获取.改版之后,所有的小说章节都放在CDN上,然后部署一系列的鉴权服务器专门做权限认证工作,在流量和响应速度上都有很大的改进.</p>
<p>以及他们对如何进行更好的灰度测试的探索.</p>
<h2 id="百万并发下php协程非阻塞框架设计实践-代维">百万并发下PHP协程+非阻塞框架设计实践 (@代维)</h2>
<h3 id="听后感-4">听后感</h3>
<p><del>Swoole神教徒之二,不是很懂你们Swoole</del></p>
<p>以他们公司的 <code>Zan Framework</code> 为基础讲了非阻塞框架的设计,没太听明白,就不误导大家了.大家可以自己研究.</p>
<h2 id="sys-schema-赖明星">Sys-Schema (@赖明星)</h2>
<h3 id="ppt概要-3">PPT概要</h3>
<ul>
<li>sys-schema 的概要和使用方法</li>
<li>sys-schema 如何帮助你找到你最想知道的答案</li>
<li>sys-schema 进阶的一些函数使用</li>
<li>MySQL 索引的原理,技巧和各种要注避免的坑</li>
</ul>
<h3 id="听后感-5">听后感</h3>
<p>个人听得很认真的一场演讲.这场演讲主要讲的是如何运用MySQL 5.7默认安装的 sys-schema
库进行数据库的性能分析和sql优化,以及索引的一些技巧和注意事项,挺实用的,比较接地气.</p>
<p>我对MySQL 5.7
最大的印象除了支持json以外,就是默认的更加严格的sql_mode设置,这导致我以前写的那些烂sql全部报错无法执行了.所以我安装mysql之后第一件事就是
<code>vim /etc/my.cnf</code> &amp; <code>sql_mode=&quot;&quot;</code></p>
<h2 id="总结">总结</h2>
<p>以上就是我在 PHPCON2016 第一天听来的内容了. 简单的写了点自己的想法,很遗憾因为要加班,所以第二天的讲座错过了,没能和鸟哥合影挺遗憾的.</p>
</div>

<h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zakokun" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62768625-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    
  </body>
</html>
